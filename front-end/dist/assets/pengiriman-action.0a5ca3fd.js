import{G as l,R as g,D as m,C as y,U as p,E as d}from"./index.1263fdb3.js";import{a as s}from"./http-common.6e68e359.js";import{u}from"./constants.b42f89d0.js";class h{getAll(r,e,a,o){return s.get(`/pengiriman?role=${r}&page=${e}&limit=${a}&search=${o}`)}get(r){return s.get(`/pengiriman/${r}`)}create(r){return s.post("/pengiriman",r)}update(r,e){let a=e;if(typeof(e==null?void 0:e.image)!="undefined"){a=new FormData;for(const[o,n]of Object.entries(e))a.append(o,n)}return s.post(`/pengiriman/${r}/update`,a,{headers:{"Content-Type":typeof(e==null?void 0:e.image)!="undefined"?"multipart/form-data":"application/x-www-form-urlencoded"}})}updateData(r,e){return s.put(`/pengiriman/${r}/update-data`,e)}delete(r){return s.delete(`/pengiriman/${r}`)}deleteAll(){return s.delete("/pengiriman")}exportData(r,e){return s.get(`/pengiriman/export/downloadPengiriman?startDate=${r}&endDate=${e}`)}getDashboard(r){return s.get("/pengiriman/dashboard/pengiriman",r)}}var c=new h;const f=t=>async r=>{var e,a,o;try{const n=await c.create(t);return((e=n.data)==null?void 0:e.data)&&r({type:y,payload:n.data.data}),Promise.resolve((o=(a=n.data)==null?void 0:a.data)!=null?o:null)}catch(n){return Promise.reject(n)}},w=()=>async(t,r)=>{const{user:e}=u,{page:a,pageSize:o,search:n=""}=r().pengirimans;try{const i=await c.getAll(e==null?void 0:e.role,a,o,n);t({type:g,payload:{pengirimans:i.data}})}catch(i){console.error(i)}},A=t=>async r=>{try{r({type:"SET_PAGE",payload:t})}catch(e){console.log(e)}},$=t=>async r=>{try{r({type:"SET_SEARCH",payload:t})}catch(e){console.log(e)}},I=t=>async r=>{try{r({type:"SET_PAGE_SIZE",payload:t})}catch(e){console.log(e)}},R=t=>async r=>{try{return await c.get(t)}catch(e){console.log(e)}},S=t=>async r=>{try{return await c.get(t)}catch(e){console.log(e)}},T=t=>async r=>{try{const e=await c.update(t.id,t);return r({type:p,payload:t}),Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},_=t=>async r=>{try{const e=await c.updateData(t==null?void 0:t.id,t);return r({type:p,payload:t}),Promise.resolve(e.data)}catch(e){return Promise.reject(e)}},N=t=>async r=>{try{await c.delete(t),r({type:m,payload:{id:t}})}catch(e){console.log(e)}},b=(t,r)=>async e=>{try{const a=await c.exportData(t,r);e({type:d,payload:a.data});const{path:o}=a.data,n=o.replace("./public","");console.log(n),window.open(`https://transmetalroof.com:5000${n}`)}catch(a){return Promise.reject(a)}},G=()=>async t=>{try{const r=await c.getDashboard();t({type:l,payload:r.data.results})}catch(r){console.error(r)}};export{_ as a,b,f as c,A as d,R as e,I as f,G as g,$ as h,N as i,S as m,w as r,T as u};
